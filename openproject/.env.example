# Docker Compose Project Name (Optional - otherwise, directory name is used)
# COMPOSE_PROJECT_NAME=openproject_prod

# Environment (e.g., production, staging, development)
ENVIRONMENT=production

# ======== Service Versions ========
POSTGRES_VERSION=16-alpine
REDIS_VERSION=7-alpine
OPENPROJECT_VERSION=16
CADDY_VERSION=2-alpine
PROMETHEUS_VERSION=latest
GRAFANA_VERSION=latest
LOKI_VERSION=latest
PROMTAIL_VERSION=latest

# ======== Global Settings ========
OPENPROJECT_HOST__NAME=your.domain.com
OPENPROJECT_HTTPS=true # Set to false if Caddy is not handling SSL or it's behind another SSL-terminating proxy

# ======== PostgreSQL Database Settings ========
POSTGRES_USER=openproject
POSTGRES_PASSWORD=your_strong_postgres_password
POSTGRES_DB=openproject

# ======== Redis Settings ========
REDIS_PASSWORD=your_strong_redis_password
REDIS_MAXMEMORY=512mb

# ======== OpenProject Core Application Settings ========
OPENPROJECT_SECRET_KEY_BASE=your_very_long_and_random_secret_key_base # Generate with: head /dev/urandom | tr -dc A-Za-z0-9 | head -c64
SENTRY_DSN= # Optional: Your Sentry DSN for error tracking
RAILS_LOG_LEVEL=info # e.g., debug, info, warn, error

# ======== OpenProject Performance Settings ========
# --- Web Service ---
OPENPROJECT_WEB__WORKERS=4
OPENPROJECT_WEB__TIMEOUT=120
# --- Worker Service ---
OPENPROJECT_WORKER__CONCURRENCY=10 # Number of concurrent jobs the background worker can process
WORKER_REPLICAS=2 # Number of worker service replicas

# ======== OpenProject Security Header Settings (defaults are generally good) ========
# OPENPROJECT_SECURITY__FORCE__HTTPS=true
# OPENPROJECT_SECURITY__HSTS=true
# OPENPROJECT_SECURITY__CSP__ENABLED=true
# OPENPROJECT_SECURITY__REFERRER__POLICY=strict-origin-when-cross-origin

# ======== Caddy Proxy Settings ========
# CADDY_ADMIN_EMAIL=admin@your.domain.com # For Let's Encrypt SSL certificates

# ======== Monitoring Settings ========
# --- Prometheus ---
PROMETHEUS_RETENTION_TIME=30d
# --- Grafana ---
GF_ADMIN_PASSWORD=your_strong_grafana_admin_password

# ======== Backup Settings ========
# --- S3 Backup (Optional) ---
BACKUP_S3_BUCKET=your-s3-backup-bucket-name
AWS_ACCESS_KEY_ID=your_aws_access_key_id
AWS_SECRET_ACCESS_KEY=your_aws_secret_access_key
# --- Backup Encryption ---
BACKUP_ENCRYPTION_KEY=your_strong_backup_encryption_password # Used by GPG to encrypt backups
# --- Backup Retention ---
BACKUP_RETENTION_DAYS=30

# ======== Resource Limits (Optional - defaults are in docker-compose.yml) ========
# You can override these if needed. Suffixes: M for Megabytes, G for Gigabytes.
# --- Default for services not explicitly set ---
# DEFAULT_MEMORY_RESERVATION=256M
# DEFAULT_MEMORY_LIMIT=2G
# DEFAULT_CPUS_LIMIT='1.0' # e.g., '0.5' for half a CPU, '2.0' for two CPUs

# --- PostgreSQL DB ---
# DB_MEMORY_LIMIT=4G
# DB_CPUS_LIMIT='2.0'
# DB_MEMORY_RESERVATION=1G

# --- Redis ---
# REDIS_MEMORY_LIMIT=1G
# REDIS_MEMORY_RESERVATION=256M

# --- OpenProject Web ---
# WEB_MEMORY_LIMIT=4G
# WEB_CPUS_LIMIT='2.0'
# WEB_MEMORY_RESERVATION=1G

# --- OpenProject Worker ---
# WORKER_MEMORY_LIMIT=2G
# WORKER_MEMORY_RESERVATION=512M

# --- Caddy Proxy ---
# PROXY_MEMORY_LIMIT=512M
# PROXY_MEMORY_RESERVATION=128M

# --- Prometheus ---
# PROMETHEUS_MEMORY_LIMIT=1G
# PROMETHEUS_MEMORY_RESERVATION=256M

# --- Grafana (Example, add to docker-compose if you want to limit it) ---
# GRAFANA_MEMORY_LIMIT=512M
# GRAFANA_MEMORY_RESERVATION=128M

# --- Loki (Example, add to docker-compose if you want to limit it) ---
# LOKI_MEMORY_LIMIT=1G
# LOKI_MEMORY_RESERVATION=256M

# --- Promtail (Example, add to docker-compose if you want to limit it) ---
# PROMTAIL_MEMORY_LIMIT=256M
# PROMTAIL_MEMORY_RESERVATION=64M